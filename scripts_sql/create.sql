DROP TABLE collaborator IF EXISTS;
DROP TABLE task IF EXISTS;
DROP TABLE project IF EXISTS;

-- create tables

CREATE TABLE collaborator(
	id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1),
	surname VARCHAR(255) NOT NULL,
	name VARCHAR(255) NOT NULL,
	patronymic VARCHAR(255) NOT NULL,
	POSITION VARCHAR(255) NOT NULL,
	PRIMARY KEY(id)
);

CREATE TABLE project(
	id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1),
	name VARCHAR(255) NOT NULL,
	short_name VARCHAR(255) NOT NULL,
	description VARCHAR(255) NOT NULL,
	PRIMARY KEY(id)
);

CREATE TABLE task(
	id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1),
	name VARCHAR(255) NOT NULL,
	work_in_hours INTEGER NOT NULL,
	begin_time DATE DEFAULT NULL,
	end_time DATE DEFAULT NULL,
	status VARCHAR(255) NOT NULL,
	collaborator_id INTEGER DEFAULT NULL,
	project_id INTEGER DEFAULT NULL,
	PRIMARY KEY(id),
	FOREIGN KEY (collaborator_id) REFERENCES collaborator(id) ON DELETE CASCADE,
	FOREIGN KEY (project_id) REFERENCES project(id) ON DELETE CASCADE
);


